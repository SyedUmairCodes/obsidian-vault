Welcome to Lesson 6 of Module 5 on Extended Query Formulation with SQL. I'm going to start with two important questions about query formulation errors. What query formulation error can lead to a loss of a job? What is the most difficult error to detect? In many years of teaching query formulation, I have found that correct examples and guidelines are not sufficient. Learners also need awareness of incorrect examples with various kinds of errors. Awareness of query formulation errors can help avoid errors as well as diagnose incorrect statements, reducing frustration and increasing confidence. Since even skilled professionals make errors, you should remain vigilant about query formulation errors as your skills progress.
Play video starting at :1:2 and follow transcript1:02
The primary objective of this lesson is to avoid query formulation errors. Secondary objectives are to detect and correct your inevitable errors, as well as errors made by others. In addition to avoiding errors, you should write statements with good coding styles so that others can easily understand your statements. Syntax errors are easy to detect because the SQL compiler generates an error message. Because a statement does not execute, syntax errors are the most severe. Redundancy and semantic errors are subtle because the SQL compiler does not indicate an error. Errors of redundancy have least severity as a result contains correct rows, but extra resource consumption occurs. Semantic errors are more severe as a result contains incorrect rows, either too many rows or missing rows. Semantic errors can sometimes cause excessive resource consumption. Although syntax errors are easy to detect, correcting a syntax error can be difficult, especially if a statement contains multiple syntax errors. SQL compilers have wide variation on quality of error messages. A common syntax error involves a misspelled keyword. More subtle errors are missing table name and an unqualified column name. Too common redundancy errors are an extra table and an unneeded GROUP BY clause. With these errors, statements still produce correct rows although extra resource consumption occurs. Semantic errors are the most serious because a statement generates incorrect rows, either too many rows or too few rows. A missing join condition is the most serious error because a statement generates excessive rows and lots of extra resource consumption may occur. A more subtle semantic error involves missing parenthesis. Example 1 lists the student name and offering number in which a student earned a grade greater than 3.7 and took the offering in fall 2019. The statement contains a missing join condition, an example of a semantic error. The missing join condition generates extra enrollment rows that do not match offering rows because of the missing join condition. You should remember that joining three tables typically requires two join conditions. Example 2 involves the same problem statement as Example 1. The SQL statement contains a redundancy error, not a semantic error. The statement contains a redundancy error due to the unnecessary group by clause. Since the problem definition does not involve summary calculations in the result or conditions, the statements should not have a group by clause. Due to the small size of the tables, you cannot detect extra resource consumption after execution. On large tables, you should be able to detect extra resource consumption. Example 3 lists the offer number, course number, and faculty number for course offering scheduled in spring or summer 2019. The statement contains a semantic error due to missing parenthesis. The statement requires parentheses to ensure that the two conditions and off term are evaluated together. Without the parentheses, the AND operator takes precedence over the OR operator. The where clause first evaluates OffTerm equals summer and OffYear equal to 2019, followed by the condition OffTerm equals spring connected by the OR operator. You can correct the statement either by adding parentheses around the first two conditions as shown in the second statement, or by using the IN operator as shown in the third statement. Beyond awareness of errors, you should strive to write statements with good coding practices. The examples in other lessons of Module 5 demonstrate good coding practices. This slide summarizes prominent types of poor SQL coding practices. Some of the practices are subjective, such as clause alignment with multiple ways to achieve good practice. You should avoid most practices such as incompatible constants and inappropriate usage of the like operator. Example 4 demonstrates poor coding practices. In a statement to list Bob Norbert's course schedule in spring 2020. The statement contains poor clause alignment and incompatible constant and a like operator without a pattern matching character. As an exercise, you should reformat the statement and change poor coding practices. You can find the revised statement in a Module 5 document. Let's wrap up Lesson 6 about query formulation errors. To avoid errors, you should be aware of the types of errors and examples of errors. Minimizing errors will reduce frustration with query formulation. Syntax errors are generally easy to detect, but sometimes difficult to fix, especially with multiple syntax errors in the same statement. Redundancy errors generate correct rows in the result, but cause excessive resource consumption. Semantic errors generate incorrect rows and result and sometimes cause excessive resource consumption. Good coding practices ensure that co-workers will better read your statements. This lesson concludes Module 5. You can find additional examples of query formulation errors in a documents for Module 5. In answer to the opening questions, a missing join condition is the most serious error for the subset of the select statement used in this course. On large tables, a missing join condition will cause many extra rows with very excessive resource consumption. The extra resource consumption could be enough to cause a poor work evaluation or even loss of a job. The most subtle type of error to detect is a semantic error that generates anticipated rows in the result. However, after addition of new rows, execution of the same statement generates extra rows in the result. In Example 3 of this lesson, execution of the statement generates correct rows if the offering table only contains rows in spring semester of 2019. However, after adding rows in spring 2020, execution of the statement generates these new rows in the result. The spring 2020 rows are not in the result of the corrected statement with proper placement of parentheses.