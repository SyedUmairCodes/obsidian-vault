
Welcome to Lesson 2 of Module 4 on basic query formulation with SQL. I'm going to start with two questions for you: one basic question on query formulation and the other question on a fine point of query formulation. What database details should you know before you try to formulate a query? When should you use parentheses and writing conditions to limit rows returned in the result? Query formulation is an important skill in application development. Everyone involved in application development must be competent in query formulation. Most students will be involved, at least initially in application development rather than in a role as a database specialist. Database specialists must also understand query formulation in SQL. Lesson 2 provides your first look at the select statement. You will learn to write select statements that use individual tables. In later lessons, we'll expand the range of select statement coverage and query formulation skills to multiple tables in row summaries. This lesson is practical objectives for you related to the usage of the select statement. I want you to use either Oracle or PostgreSQL to write and execute practice problems using a select statement involving row conditions on individual tables. In this lesson, we will study a simple structure for the select statement. After this brief introduction, the lesson will show examples that you can mimic as you complete problems. The select statement begins with the SELECT keyword and list of column expressions to specify the result table. I will discuss expression shortly. The simplest column expression is just a column name. The next part of the select statement involves the FROM clause specifying a list of tables and join operations. For this lesson, we will use statements that have just a single table following the from keyword. The WHERE and ORDER BY clauses are optional. The WHERE clause indicates conditions that result rows must satisfy. The ORDER BY clause is used if the result rows should be in a specific order. The word expression is important in most computer languages, including the SQL select statement. In most places in the select statement, whenever a column can be used, a column expression can also be used. Examples of simple column expressions are FacSalary times 1.1 to increase salary by 10 percent and EnrGrade minus 1 to reduce a grade by one point. The where clause can use logical expressions using the and or not operators to combine conditions. Logical expressions have a value of true or false. Only rows in which the logical expression is true are in the result. For example, the logical expression OffTerm equal FALL AND OffYear equal 2019, indicates that rows and results must be in fall 2019. This Oracle database diagram shows tables, columns, and relationships. You should know or consult a database diagram when formulating queries. The examples in this lesson use only single tables so that relationship details are not necessary to know in this lesson. You should focus on three major types of data. NUMERIC, integer, fixed decimal, floating point, TEXT CHAR OR VARCHAR, and DATE. You'll want to use operations in comparisons with constants that are compatible with the major types of data. For example, you should use a numeric constant in a condition with a numeric column, not a text constant. The first example retrieves all columns and rows from the faculty table. The asterisk following the SELECT keyword means all columns of the tables in the FROM clause. The absence of a WHERE clause means that all rows of the tables in the FROM clause are in the result. The second example adds a WHERE clause to restrict faculty rows and result to a specific faculty number value. The statement result is a subset of the first example. The third example retrieves a subset of the columns of the faculty table for faculty with rank of full professor in a salary greater than 65,000. For conditions on text columns, Oracle and PostgreSQL are case-sensitive by default. Since the values of FacRank were entered with uppercase, the condition will not match correctly if the constant is not uppercase. The fourth example demonstrates duplicate rows in the result. Since many faculty live in the same city and state, duplicate rows are in the result. To eliminate duplicate rows, the DISTINCT keyword should be used. I encourage you to execute each statement in the SQL developer or pgAdmin tools. For additional experience, I encourage you to execute statements using both tools. Example 5 demonstrates expressions in the SELECT and WHERE clauses. Example 5 retrieves name: first and last, and inflated salary of faculty hired after 2008. The expression in the select clause multiplies the faculty salary by 1.1 and renames a column in the result to IncreasedSalary using the AS keyword. Using a name for computed column avoids a meaningless default name. The WHERE clause uses expression to extract the year component of the FacHireDate column. Functions to manipulate dates differ across DBMSs. In Oracle 2 functions, two char and two number required. In PostgreSQL, only one function date_part is required. As you can see, the select statements are not portable across Oracle and PostgreSQL because of different date functions in the two DBMSs. Columns using the text datatype, char or varchar support both exact and inexact matching. You can use the equality comparison operator for exact matching with a text column as shown in the previous examples. In exact matching, supports conditions that match some pattern are matching identical text value. One of the most common types of inexact matching is to find values having a common prefix, such as IS for information systems courses. Example 6 uses the like operator along with a pattern matching character percent symbol to perform prefixed matching. The texts constant IS percent symbol means match texts beginning with IS and ending with anything. The wildcard character percent symbol matches any text. Note that pattern matching character only has a special meaning with the like operator, not the equality operator. The SQL standard has other pattern-matching characters, but the wildcard character is the most important. Example 7 depicts date range matching on a column with the date datatype. In both Oracle and PostgreSQL, single quotation marks enclose date constants. In both Oracle and PostgreSQL, the default date format uses a two-digit day, three-letter month abbreviation, and a four-digit year, all separated by hyphens. PostgreSQL also supports other default date formats, such as the four-digit year, two-digit month, and two-digit day, all separated by hyphens. The default date format can be changed in the SQL developer using the tools preferences item. Date columns can be compared just like numbers with the usual comparison operators, such as equal to, less than, and greater than. The between and operator defines a closed interval including the endpoints. You should not use the like operator and pattern matching characters in conditions with date columns. Some DBMSs allow like operator, but it's not portable across DBMSs and the results may vary within a DBMS. You should treat date columns as numeric, not text. Besides testing columns for specified values, you sometimes need to test for the lack of a value. A NULL value indicates a lack of a normal value for column. A NULL can mean that the value is unknown or the value is not applicable to the row. For the offering table, a NULL value for fact number means that the instructor is not yet assigned. Testing for NULL values is done with the is no comparison operator as shown in this Example 8. Example 9 depicts a complex logical expression involving both logical operators AND and OR except for retrieve offerings in fall 2019 or winter 2020. I have seen frequent mistakes by students mixing the AND and OR operators without using parentheses. So I strongly recommend using parentheses when mixing AND and OR in a logical expression. Otherwise, the reader, the select statement, may not understand the grouping of the AND and OR conditions. Without parentheses, you must depend on the default way that AND and OR conditions are grouped. The reader of the statement may not be aware of the default grouping. In addition, the statement may not be portable across DBMSs without parentheses. Let's wrap up this lesson that gave you an initial look at the SQL select statement with examples on single tables, an important subset of the select statement. You were shown example conditions on numeric columns, texts columns, and date columns. Some of the examples used expressions in exact matching with the like operator, column renaming, distinct keyword, and logical expressions combining the AND and OR operators.
Play video starting at :10:59 and follow transcript10:59
Now, let's return to the opening questions in the lesson. For single table problems, you must know the columns of a table and data types. Lessons 3 and 4 in Module 4 focus on problems involving multiple tables. So you must know the relationships in the database in addition to the columns and data types. When mixing the logical operators, AND and OR, you should always use parentheses to avoid errors and to help the reader understand the meaning of your statement. I encourage you to work lots of problems to master query formulation and the select statement.
